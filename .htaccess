Options +FollowSymLinks -MultiViews
RewriteEngine On

# Forcer HTTPS et www en une seule redirection
#RewriteBase /
#RewriteCond %{HTTP_HOST} !^nomi\.extrag\.one$ [NC]
#RewriteCond %{HTTPS} off [OR]
#RewriteCond %{HTTP_HOST} !^www\. [NC]
#RewriteRule ^(.*)$ https://www.extrag.one/$1 [L,R=301]

RewriteRule ^outils$ 					outils.php [L]
RewriteRule ^outils/categorie/(.*)		outils.php?categorie=$1 [L]
RewriteRule ^outil/(.*)$ 				outil.php?nom=$1 [L]
RewriteRule ^ajouter					ajouter.php [L]
RewriteRule ^categories$				categories.php [L]
RewriteRule ^admin$						admin/dashboard.php [L]
RewriteRule ^admin/$					admin/dashboard.php [L]
RewriteRule ^contact$					contact.php [L]

RewriteRule ^article/(.*)$				article.php?slug=$1 [L]
RewriteRule ^articles$					articles.php [L]

RewriteRule ^nomi$ nomi/index.php [L]
RewriteRule ^nomi/(.*)$ nomi/$1 [L]

# === Résoudre le CORS  ===
<IfModule mod_headers.c>
    <FilesMatch "\.(woff2?|ttf|otf|eot|svg|png|jpg|jpeg|gif|webp)$">
        Header set Access-Control-Allow-Origin "*"
    </FilesMatch>
</IfModule>

# Bloque l'accès direct à tous les fichiers .env et aux fichiers sensibles
<Files ".env*">
    Order allow,deny
    Deny from all
</Files>

<Files "~ \.(env(\.|\.production|\.staging|\.test)*$">
    Order allow,deny
    Deny from all
</Files>

# Option alternative plus moderne (Apache 2.4+)
<FilesMatch "^\.env">
    Require all denied
</FilesMatch>

<FilesMatch "\.env(\w+)?$">
    # Bloque aussi .env.old, .env.backup, etc.
    Require all denied
</FilesMatch>